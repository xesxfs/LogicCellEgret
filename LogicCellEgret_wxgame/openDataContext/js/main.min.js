var egret=window.egret,__reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);a.prototype=t.prototype,e.prototype=new a},Main=function(e){function t(){var t=e.call(this)||this;t.scrollView=new egret.ScrollView,t.gameData=[{openId:"",avatarUrl:"",nickName:"peony",data:[{score:100,time:1e3}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:101,time:100}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:102,time:1700}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:103,time:1800}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:104,time:1900}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:105,time:1070}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:106,time:1030}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:107,time:1010}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:108,time:1020}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:109,time:1030}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:111,time:1040}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:112,time:1050}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:123,time:1060}]},{openId:"",avatarUrl:"",nickName:"peony",data:[{score:167,time:1080}]}],wx.onMessage(function(e){console.log(e),e.isDisplay?wx.getFriendCloudStorage({keyList:[],success:function(e){console.log(e),t.runGame()},fail:function(e){console.log(e)},complete:function(){}}):t.cancelGame()});var a=new egret.ImageLoader;a.addEventListener(egret.Event.COMPLETE,function(e){var a=e.currentTarget;t.bgtexture=new egret.Texture,t.bgtexture._setBitmapData(a.data)},t),a.load("resource/assets/panel_shop_01.png");var n=new egret.ImageLoader;return n.addEventListener(egret.Event.COMPLETE,function(e){var a=e.currentTarget;t.panel_01=new egret.Texture,t.panel_01._setBitmapData(a.data)},t),n.load("resource/assets/panel_bg.png"),t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){console.log("子域输出点击")},t),t}return __extends(t,e),t.prototype.runGame=function(){var e=this;console.log("runGame opendata");var t=new egret.Bitmap(this.panel_01);t.x=80,t.y=168,this.addChild(t);var a=new egret.DisplayObjectContainer;this.scrollView.setContent(a),this.scrollView.x=t.x,this.scrollView.y=t.y,this.scrollView.width=t.width,this.scrollView.height=t.height,this.addChild(this.scrollView),this.gameData.forEach(function(t,n){var r=new egret.DisplayObjectContainer;r.y=130*n,a.addChild(r);var o=new egret.Bitmap(e.bgtexture);o.width=460,r.addChild(o);var i=new egret.TextField;i.y=50,i.text="名字:"+t.nickName,r.addChild(i);var s=new egret.TextField;s.x=260,s.y=50,s.text="得分:"+t.data[0].score,r.addChild(s)},this)},t.prototype.cancelGame=function(){for(var e=0,t=this.numChildren;t>e;e++)this.removeChildAt(0);this.scrollView.removeContent(),console.log("停止开放数据域")},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main"),window.Main=Main;